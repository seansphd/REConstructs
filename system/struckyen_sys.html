<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struycken Pattern Generator</title>
    <style>
        /* Reset margins, padding, and box model */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* General page styling */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        /* Button controls container */
        .controls {
            margin-bottom: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Button styling */
        button {
            padding: 0.5rem 1rem;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background: #555;
        }

        /* Preview of available modules */
        .modules-preview {
            display: grid;
            grid-template-columns: repeat(16, 40px);
            gap: 4px;
            margin-bottom: 2rem;
            background: white;
            padding: 1rem;
            border-radius: 4px;
        }

        /* Base module style */
        .module {
            width: 40px;
            height: 40px;
            background: #000;
            position: relative;
        }

        /* Container for generated patterns */
        .pattern-container {
            background: white;
            padding: 1rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Grid for all blocks */
        .pattern-grid {
            display: grid;
            gap: 1px;
            background: #ddd;
        }

        /* Each block is itself a grid of modules */
        .block {
            display: grid;
            gap: 1px;
            background: #ddd;
        }

        /* Module definitions (clip-paths or subdivided grids) */
        .module-0 { background: #000; }
        .module-1 { background: #000; clip-path: polygon(0 0, 100% 0, 75% 100%, 0 100%); }
        .module-2 { background: #000; clip-path: polygon(25% 0, 100% 0, 100% 100%, 0 100%); }
        .module-3 { background: #000; clip-path: polygon(0 0, 75% 0, 100% 100%, 0 100%); }
        .module-4 { background: #000; clip-path: polygon(25% 0, 100% 0, 100% 75%, 0 100%); }
        .module-5 { background: #000; clip-path: polygon(0 0, 100% 25%, 100% 100%, 0 75%); }

        /* Modules with subdivisions (using CSS grid and pseudo-elements) */
        .module-6 { 
            background: #fff;
            border: 2px solid #000;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }
        .module-6::before {
            content: '';
            background: #000;
            grid-column: 1;
            grid-row: 1;
        }

        .module-7 { 
            background: #fff;
            border: 2px solid #000;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }
        .module-7::before {
            content: '';
            background: #000;
            grid-column: 1;
            grid-row: 1/3;
        }

        .module-8 { 
            background: #fff;
            border: 2px solid #000;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }
        .module-8::before {
            content: '';
            background: #000;
            grid-column: 2;
            grid-row: 1/3;
        }

        .module-9 { 
            background: #fff;
            border: 2px solid #000;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }
        .module-9::before {
            content: '';
            background: #000;
            grid-column: 1/3;
            grid-row: 2;
        }

        .module-10 { 
            background: #fff;
            border: 2px solid #000;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }
        .module-10::before {
            content: '';
            background: #000;
            grid-column: 2;
            grid-row: 2;
        }
    </style>
</head>
<body>
    <!-- Buttons to generate different pattern sizes -->
    <div class="controls">
        <button onclick="generatePattern(2, 2, 4)">2x2 Blocks (4x4 Modules)</button>
        <button onclick="generatePattern(7, 7, 4)">7x7 Blocks (4x4 Modules)</button>
        <button onclick="generatePattern(10, 10, 2)">10x10 Blocks (2x2 Modules)</button>
    </div>

    <!-- Preview area showing all module types -->
    <div class="modules-preview">
        <!-- Filled by JS -->
    </div>

    <!-- Container for the generated pattern -->
    <div class="pattern-container">
        <div class="pattern-grid"></div>
    </div>

    <script>
        // Reference to the preview area
        const modulesPreview = document.querySelector('.modules-preview');

        // Populate preview with all modules
        for (let i = 0; i < 11; i++) {
            const module = document.createElement('div');
            module.className = `module module-${i}`;
            modulesPreview.appendChild(module);
        }

        // Creates a diagonal pattern matrix of given size
        function createDiagonalPattern(size) {
            const pattern = [];
            for (let i = 0; i < size; i++) {
                pattern[i] = [];
                for (let j = 0; j < size; j++) {
                    // Pattern value depends on diagonal offset
                    pattern[i][j] = (i + j) % size;
                }
            }
            return pattern;
        }

        // Randomly shuffles an array (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Generate pattern of blocks and modules
        function generatePattern(blocksWidth, blocksHeight, moduleSize) {
            const patternGrid = document.querySelector('.pattern-grid');
            patternGrid.style.gridTemplateColumns = `repeat(${blocksWidth}, 1fr)`;
            patternGrid.innerHTML = '';

            const basePattern = createDiagonalPattern(moduleSize);
            const moduleTypes = Array.from({length: 11}, (_, i) => i);

            // Loop through each block
            for (let blockY = 0; blockY < blocksHeight; blockY++) {
                for (let blockX = 0; blockX < blocksWidth; blockX++) {
                    const block = document.createElement('div');
                    block.className = 'block';
                    block.style.gridTemplateColumns = `repeat(${moduleSize}, 1fr)`;

                    // Shuffle module assignments for each block
                    const shuffledModules = shuffleArray([...moduleTypes]);
                    
                    // Fill block with modules according to base pattern
                    for (let moduleY = 0; moduleY < moduleSize; moduleY++) {
                        for (let moduleX = 0; moduleX < moduleSize; moduleX++) {
                            const module = document.createElement('div');
                            const patternValue = basePattern[moduleY][moduleX];
                            module.className = `module module-${shuffledModules[patternValue]}`;
                            block.appendChild(module);
                        }
                    }

                    patternGrid.appendChild(block);
                }
            }
        }

        // Initialise with a default pattern
        generatePattern(2, 2, 4);
    </script>
</body>
</html>
